<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Área Protegida</title>
</head>
<body>

<h1>Área Protegida</h1>
<p id="status">Verificando autenticação...</p>
<button onclick="logout()">Sair</button>

<script>
  async function checkAuth() {
    const res = await fetch('/api/check-session', {
      credentials: 'include'
    });

    if (!res.ok) {
      window.location.href = '/';
      return;
    }

    const data = await res.json();
    document.getElementById('status').innerText =
      `Usuário autenticado: ${data.user}`;
  }

  async function logout() {
    await fetch('/api/logout', {
      method: 'POST',
      credentials: 'include'
    });
    window.location.href = '/';
  }

  checkAuth();
</script>

</body>
</html>
